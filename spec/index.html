<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ZXingJS2 Spec Runner</title>
    <link rel="stylesheet" type="text/css" href="../node_modules/mocha/mocha.css">
</head>
<body>

<div id="mocha"></div>
<script src="../node_modules/expect.js/index.js"></script>
<script src="../node_modules/mocha/mocha.js"></script>
<script src="../node_modules/happen/happen.js"></script>
<script src="sinon-1.17.3.js"></script>

<!-- source files -->
<script src="../build/deps.js"></script>
<script>
    // Load source files in the specified order.
    var head = document.getElementsByTagName("head")[0],
        PREFIX = "../src/",
        sources = [],
        j;

    for (j = 0; j < deps.length; j += 1) {
        sources = sources.concat(deps[j].src.map(function (item) {
            return PREFIX + item;
        }));
    }

    function loadScripts(srcArray, callback) {
        var i = 0,
            iMax = srcArray.length;

        loadScript();

        function loadScript() {
            if (i >= iMax) {
                return callback();
            }
            var script = document.createElement("script");
            script.onload = loadScript;
            script.src = srcArray[i];
            i += 1;
            head.appendChild(script);
        }
    }
</script>

<script>
    mocha.setup('bdd');
    mocha.ignoreLeaks();
</script>

<!-- spec files -->
<script src="resources/results.js"></script>
<script src="specSuites.js"></script>
<script>
    // Load spec suites files.
    sources = sources.concat(specSuites);

    loadScripts(sources, function () {
        (window.mochaPhantomJS || window.mocha).run();
    });
</script>

</body>
</html>